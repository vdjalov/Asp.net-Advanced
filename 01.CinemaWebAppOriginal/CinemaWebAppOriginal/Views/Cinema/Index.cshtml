@using CinemaWebAppOriginal.ViewModels;
@model IEnumerable<AllCinemaViewModel>

@{
    ViewBag.Title = "Cinemas";
}



@* @if (User?.Identity?.IsAuthenticated ?? false) // show only if user is logged in
{
    <h2>Cinemas</h2>
    @if (!string.IsNullOrEmpty(ViewBag.userId) && ViewBag.isUserManager)
    {
        <!-- Button to add a new cinema -->
        <a asp-action="Create" class="btn btn-success mb-4">Add New Cinema</a>
    }
}

<div class="row">
    @foreach (var cinema in Model)
    {
        <div class="col-md-4">
            <div class="card mb-4 shadow-sm">
                <img src="~/images/cinema.jpg" class="card-img-top" alt="Cinema Image" style="height: 200px; object-fit: cover;">
                <div class="card-body">
                    <h5 class="card-title">@cinema.Name</h5>
                    <p class="card-text">@cinema.Location</p>
                    <a asp-action="Details" asp-route-id="@cinema.Id" class="btn btn-primary">View Movie Program</a>
                </div>
            </div>
        </div>
    }
</div> *@


<h2 class="my-4 text-center">Cinemas</h2>

@if (User?.Identity?.IsAuthenticated ?? false) // show only if user is logged in
{
    @* <h2>Cinemas</h2> *@
    @if (!string.IsNullOrEmpty(ViewBag.userId) && ViewBag.isUserManager)
    {
        <div class="d-flex justify-content-end mb-4">
            <a asp-action="Create" class="btn btn-primary btn-lg">
                <i class="bi bi-plus-circle"></i> Add New Cinema
            </a>
        </div>
    }
}

<table class="table table-hover table-bordered">
    <thead class="table-dark">
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Location</th>
            <th scope="col" class="text-center">Program</th>
        </tr>
    </thead>
    <tbody>
        @foreach (AllCinemaViewModel cinema in Model)
        {
            <tr>
                <td>@cinema.Name</td>
                <td>@cinema.Location</td>
                <td class="text-center">
                    <a asp-action="Details" asp-route-id="@cinema.Id" class="btn btn-info btn-sm me-2">
                        <i class="bi bi-calendar-plus"></i> View Program
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>